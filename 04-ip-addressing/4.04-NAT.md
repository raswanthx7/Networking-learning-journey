# 4.4 Network Address Translation (NAT)

##  Topics Covered
- What is NAT
- Why NAT is used
- How NAT works (step-by-step)
- Types of NAT:
  - Static NAT
  - Dynamic NAT
  - PAT (Port Address Translation)
  - Port Forwarding Does
- Real-world examples of NAT
- NAT in Cloud Environments
- Summary

---

## 1. Introduction
**Network Address Translation (NAT)** is the process of changing the **source** or **destination** IP address of network packets as they pass through a router, firewall, or gateway.  
NAT is mainly used to connect **private IP addresses** to the **public internet** and to conserve public IP addresses.

---

## 2. Why NAT is Used
- **IP Address Conservation:** Multiple devices can share one public IP.
- **Security:** Hides private IP addresses from the internet.
- **Cloud Communication:** Allows private cloud instances to access the internet without exposing their private IPs.

---

## 3. How NAT Works (Step-by-Step Example)
**Scenario:** Phone accessing google.com through a home router.
1. Phone has a private IP (`192.168.1.10`) and sends a request to Google.
2. Router changes the **source IP** from private IP to its **public IP** (e.g., `103.25.231.55`).
3. Google replies to the router’s public IP.
4. Router changes the **destination IP** back to the phone’s private IP.
5. Phone receives the reply.

---

## 4. Types of NAT

### 4.1 Static NAT (One-to-One)
- **Definition:** Maps a private IP to a public IP permanently.
- **Example:** `192.168.1.10` ↔ `203.0.113.10`
- **Usage:** When you want a fixed public IP for a private server.

### 4.2 Dynamic NAT (Many-to-Many)
- **Definition:** Maps private IPs to a pool of public IPs dynamically.
- **Example:** `192.168.1.10` → `203.0.113.10` today, but may change tomorrow.
- **Usage:** Large networks with multiple public IPs available.

### 4.3 PAT (Port Address Translation) / NAT Overloading
- **Definition:** Many private IPs share one public IP by using different ports.
- **Example:**  
`192.168.1.10:5000` → `203.0.113.5:40001`
`192.168.1.20:5000` → `203.0.113.5:40002`
- **Usage:** Most common in home routers and cloud NAT Gateways.

### 4.4 SNAT (Source NAT)
- **Definition:** Changes the source IP of outgoing packets.
- **Usage:** Private → Public communication.

### 4.5 DNAT (Destination NAT)
- **Definition:** Changes the destination IP of incoming packets.
- **Usage:** Port forwarding from public IP to a private server.

### 4.6 What Port Forwarding Does

- Normally, NAT hides your internal devices from the internet.

- With port forwarding, you create a rule that says:

> "If a request comes to my public IP on port X, send it to my private IP on port Y."

**Example:**
You host a web server on your laptop inside your home network.

- Public IP: `203.0.113.5`

- Laptop’s Private IP: `192.168.1.10`

- Service: Web server on port `80`

**Rule:**

Public: `203.0.113.5:80` → Private:`192.168.1.10:80`


---

## 6. Real-World Examples
- **Home Network:** Your laptop, phone, and TV use one public IP via NAT.
- **Office Network:** Hundreds of employees share a few public IPs via NAT.
- **Cloud:** EC2 instances in a private subnet download updates via a NAT Gateway.

---

## 7. Summary
- NAT translates between private and public IPs.
- Saves public IPs and adds security.
- Types include Static, Dynamic, PAT, SNAT, and DNAT.
- Essential for both home networking and cloud setups.

---
